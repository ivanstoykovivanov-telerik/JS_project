<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt"
        crossorigin="anonymous">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css" media="screen,projection" />
    <link type="text/css" rel="stylesheet" href="css/style.css" media="screen,projection" />
    <link type="text/css" rel="stylesheet" href="css/forms/login_form.css" media="screen,projection" />
    <link type="text/css" rel="stylesheet" href="css/forms/register_form.css" media="screen,projection" />
    <!-- add roboto font  ??? -->
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Evento</title>
</head>

<body>
    <!-- NAVBAR -->
    <header class="main-header">
            <nav class="transparent">
                <div class="container">
                    <div class="nav-wrapper">
                        <a href="#" class="brand-logo black-text"></a>
                        <!-- name of the app or logo -->
                        <a href="#" data-activates="mobile-nav" class="button-collapse">
                            <i class="fa fa-bars"></i>
                        </a>
                        <ul class="right hide-on-med-and-down">
                            <li>
                                <a href="" id="favorites" class="btn modal-trigger orange" data-target="modal_liked_events">Favourites</a>
                            </li>
                            <li>
                                <a href="" class="btn modal-trigger orange" data-target="modal_register">Register</a>
                            </li>
                            <li>
                                <a href="" class="btn modal-trigger orange" data-target="modal_login">Login</a>
                            </li>
                            <li>
                                <a href="" class="btn modal-trigger orange" data-target="modal_logout">Logout</a>
                            </li>
                        </ul>
                        <!-- MOBILE NAV -->
                        <ul class="side-nav" id="mobile-nav">
                            <h4 class="black-text text-darken-4 center logo-mobile">Evento</h4>
                            <li>
                                <div class="divider"></div>
                            </li>
                            <li>
                                <a href="" class="modal-trigger" data-target="modal_liked_events">
                                    <i class="far fa-heart m-nav-icon"></i>
                                    <span class="content">Favorites</span>
                                </a>
                            </li>
                            <li>
                                <a href="" class="modal-trigger" data-target="modal_register">
                                    <i class="fas fa-user-plus"></i>
                                    <span class="content">Register</span>
                                </a>
                            </li>
                            <li>
                                <a href="" class="modal-trigger" data-target="modal_logout">
                                    <i class="fas fa-sign-out-alt"></i>
                                    <span class="content">Logout</span>
                                </a>
                            </li>
                            <li>
                                <div class="divider black-text"></div>
                            </li>
                            <li>
                                <a href="" class="btn modal-trigger orange white-text" data-target="modal_login">Login</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </header>
        <!-- END NAVBAR -->

    <section class="section-search center">
        <div class="container">
            <div class="row">
                <div class="col s12">
                    <div class="title-main">Evento</div>
                    <h4 class="">Feel the pulse of your city</h4>
                </div>
            </div>
            <div class="row">
                <form class="search-form col s6 offset-s3 card-panel">
                    <div class="input-field col s12">
                        <input placeholder="City:" id="city" type="text" class="autocomplete">
                        <label for="city"></label>
                    </div>
                    <div class="input-field col s12">
                        <select id="category">
                            <option value="Category" disabled selected>Choose your interest:</option>
                        </select>
                        <label>Event Categories:</label>
                    </div>
                    <div class="input-field col s12">
                        <input type="text" id="date" class="datepicker" placeholder="Date: ">
                    </div>
                    <div class="input-field col s12">
                        <input type="text" id="time" class="timepicker" placeholder="Time: ">
                    </div>
                </form>
            </div>
        </div>
    </section>

    <section class="search_icon">
        <div class="container">
            <div class="row">
                <div class="col s12 center-align">
                    <button id="searchBtn" class="btn-floating btn-large orange text-green pulse tooltipped" data-position="bottom" data-tooltip="Search events">
                        <i class="material-icons"> search</i>
                    </button>
                </div>
            </div>
        </div>
    </section>
    <section>
        <div class="container">
            <div class="row">

                <div id="eventCards">
                    <!-- DATA FROM API COMES HERE  -->
                </div>

                <!-- GENERIC CARD  -->
                <div class="col l4 m6 s12">
                    <div class="card purple lighten-4 float">
                        <div class="card-image">
                            <img src="img/img6.jpg" class="materialboxed" width="100%" data-caption="Info goes here">
                            <a class="btn-floating halfway-fab waves-effect waves-light red">
                                <i class="material-icons add-to-favorites">favorite_border</i>
                            </a>
                        </div>
                        <div class="card-content">
                            <span class="card-title">Card Title Materialize </span>
                            <div class="event-description">
                                I am a very simple card. I am good at containing small bits of information. I am convenient because I require little markup
                                to use effectively.I am a very simple card. I am good at containing small bits of information.
                            </div>
                        </div>
                        <div class="card-action">
                            <div class="center-align">
                                <a class="btn orange center-align" href="!#">Buy ticket</a>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- END GENERIC CARD  -->

                <!-- TEST  -->
                <div class="col l4 m6 s12">
                    <div class="card purple lighten-4">
                        <div class="card-image">
                            <img class="materialboxed" src="${event.logo !== null ? event.logo.url : ''}" width="100%" data-caption="Info goes here">
                            <a class="btn-floating halfway-fab waves-effect waves-light red tooltipped" data-position="bottom" data-tooltip="Add to favourites">
                                <i class="material-icons add-to-favorites"> favorite_border </i>
                            </a>
                        </div>
                        <div class="card-content">
                            <h5 class="black-text">
                                ${event.name.text}
                            </h5>
                            <h6>
                                Date: ${event.start.local}
                            </h6>
                            <p>
                                ${event.description.text.substring(0,200)}...
                            </p>
                            <h6>$5.00</h6>
                        </div>
                        <div class="card-action">
                            <div class="center-align">
                                <a class="btn orange center-align" target="_blank" href="${event.url}">Buy ticket</a>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- END TEST  -->

            </div>
        </div>
    </section>
    <footer class="center">
        <div class="container">
            <div class="row">
                <div class="col s12">
                    <h3 class="">Share with friends</h3>
                    <a href="https://facebook.com" target="_blank" class="orange-text tooltipped" data-position="bottom" data-tooltip="facebook">
                        <i class="fab fa-facebook fa-5x"></i>
                    </a>
                    <a href="https://linkedin.com" target="_blank" class="orange-text tooltipped" data-position="bottom" data-tooltip="linkedIn">
                        <i class="fab fa-linkedin fa-5x"></i>
                    </a>
                    <a href="https://twitter.com" target="_blank" class="orange-text tooltipped" data-position="bottom" data-tooltip="twitter">
                        <i class="fab fa-twitter fa-5x"></i>
                    </a>
                    <a href="https://googleplus.com" target="_blank" class="orange-text tooltipped" data-position="bottom" data-tooltip="googleplus">
                        <i class="fab fa-google-plus fa-5x"></i>
                    </a>
                    <a href="https://pinterest.com" target="_blank" class="orange-text tooltipped" data-position="bottom" data-tooltip="pinterest">
                        <i class="fab fa-pinterest fa-5x"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>
    <!-- </div>    /END WRAPPER -->

    <!-- MODALS  -->
    <!-- REGISTER -->
    <div id="modal_register" class="modal">
        <div class="modal-content blue darken-2">
            <div class="container">
                <h4 class="center-align white-text">Register</h4>
                <div class="row">
                    <form id="register-form" action novalidate="novalidate">
                        <div class="input-field s12">
                            <i class="material-icons prefix">person</i>
                            <input id="username" name="username" type="text" data-error=".errorTxt1">
                            <div class="errorTxt1"></div>
                            <label class="white-text" for="username">Username</label>
                        </div>
                        <div class="input-field s12">
                            <i class="material-icons prefix">email</i>
                            <input id="reg-email" name="email" type="email" data-error=".errorTxt2">
                            <label class="white-text" for="email">Email</label>
                            <div class="errorTxt2"></div>
                        </div>
                        <div class="input-field">
                            <i class="material-icons prefix">lock</i>
                            <input id="reg-password" name="password" type="password" data-error=".errorTxt3">
                            <label class="white-text" for="password">Password</label>
                            <div class="errorTxt3"></div>
                        </div>
                        <div class="input-field">
                            <i class="material-icons prefix">lock_open</i>
                            <input id="repassword" name="repassword" type="password" data-error=".errorTxt4">
                            <label class="white-text" for="repassword">Repeat Password</label>
                            <div class="errorTxt4"></div>
                        </div>
                        <div class="reg-form-part-2">
                            
                            <div class="row">
                                <div class="col s5">
                                    <div class="input-field">
                                        <select multiple id="interests" name="interests">
                                            <option   disabled selected>I like:</option>
                                            <option value="1">Art</option>
                                            <option value="2">Theater</option>
                                            <option value="3">Film</option>
                                            <option value="4">Music</option>
                                            <option value="5">Photography</option>
                                            <option value="6">Dance</option>
                                            <option value="7">Sculpture</option>
                                        </select>
                                        <label class="white-text">Areas of Interest: </label>
                                        <div class="errorTx5"></div>
                                    </div>
                                </div>
                                <div class="col s5 offset-s2">
                                    <div class="input-field">
                                        <select class="error" id="background" name="background" data-error=".errorTxt6">
                                            <option class="white-text" value="" disabled="" selected="">I am:</option>
                                            <option value="1">Student</option>
                                            <option value="2">Young professional</option>
                                            <option value="3">Retired</option>
                                        </select>
                                        <label class="white-text">Background: </label>
                                        <div class="input-field">
                                            <div class="errorTxt6"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s4">
                                    <label class="white-text" for="gender_select">Gender </label>
                                    <p>
                                        <input name="gender" type="radio" id="gender_male">
                                        <label class="white-text" for="gender_male">Male</label>
                                    </p>
                                    <p>
                                        <input name="gender" type="radio" id="gender_female" value="f" class="error">
                                        <label class="white-text" for="gender_female">Female</label>
                                    </p>
                                    <p>
                                        <input name="gender" type="radio" id="gender_other" value="other" class="error">
                                        <label class="white-text" for="gender_other">Other</label>
                                    </p>
                                </div>
                                <div class="col s4 offset-s4">
                                    <label class="white-text" for="tnc_select">Service Agreement</label>
                                    <p>
                                        <input type="checkbox" class="checkbox error" id="agree" name="agree" data-error=".errorTxt8">
                                        <label class="white-text" for="agree">Please agree to our policy:</label>
                                    </p>
                                    <div class="input-field">
                                        <div class="errorTxt8"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-med orange login-btn waves-effect waves-green">
                            <i class="fas fa-user-plus center-align"></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- LOGIN -->
    <div id="modal_login" class="modal">
        <div class="modal-content login blue darken-2">
            <h4 class="center-align white-text">Login</h4>
            <form>
                <div class="input-field">
                    <i class="material-icons prefix">email</i>
                    <input type="email" id="log-email">
                    <label class="white-text" for="email">Email</label>
                </div>
                <div class="input-field">
                    <i class="material-icons prefix">lock</i>
                    <input type="email" id="log-password">
                    <label class="white-text" for="email">Password</label>
                </div>
                <button class="btn btn-med orange login-btn">
                    <i class="fas fa-sign-in-alt"></i>
                </button>
            </form>
        </div>
    </div>
    <!-- LOGOUT -->
    <div id="modal_logout" class="modal">
        <div class="modal-content center-align blue darken-2">
            <h5 class="center-align white-text">You have successfully logged out.</h5>
        </div>
    </div>
    <!-- FAVORITES -->
    <div id="modal_liked_events" class="modal">
        <div class="modal-content  blue darken-1">
            <ul class="collection with-header favorites_to_delete">
                <li class="collection-header">
                    <h4 class="center-align">Liked Events</h4>
                </li>
                <div id="favoritesToDisplay">
                    <!-- events from backend will be displayed here -->
                </div>
                <li class="collection-item">
                    <div>Event 1
                        <a href="#!" class="right-alignment">
                            <i class="material-icons green-text">link</i>
                        </a>
                        <a href="#!" class="right-align delete_favorite"></a>
                        <i class="material-icons red-text">close</i>
                        </a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    </div>
    </div>
    <!-- END MODALS  -->

    <!--Import jQuery before materialize.js-->
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="js/materialize.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.17.0/jquery.validate.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.17.0/additional-methods.min.js"></script>
    <script src="js/form_validations/register_form_validation.js"></script>
    <script src="js/form_validations/login_form_validation.js"></script>

    <!-- JS Scripts/ Modules -->
    <script src="js/app.js" type="module"></script>


    <!-- JQUERY FOR MATERIALIZE.CSS  -->
    <script>
        $(document).ready(function () {

            // SIDENAV for mobile
            $('.button-collapse').sideNav();

            //Initialize AUTOCOMPLETE:
            //TODO make a request to an API for some data of cities and put it here : 
            $('.autocomplete').autocomplete({
                data: {
                    "Sofia": null,
                    "Los Angeles": null,
                    "London": null,
                    "Moscow": null,
                    "New York": null,
                    "Plovdiv": null,
                    "Berlin": null,
                    "Barcelona": null,
                },
                limit: 10
            })

            //Initialize SELECT
            $('select').material_select();

            // Initialize DATEPICKER : 
            $('.datepicker').pickadate({
                selectMonths: true,
                selectYears: 15,
                closeOnSelect: true
            });

            // Initialize TIMEPICKER : 
            $('.timepicker').pickatime({
                dafault: "now",
                twelvehour: true,
                autoclose: true
            });

            //Initialize TOAST
            //code for the toast button appearing when heart is clicked
            var toastHTML = '<button class="btn-flat white-text toast-action">Added to favourites</button>';
            $('.add-to-favorites').click(function () {
                Materialize.toast(toastHTML, 2000, 'rounded');
                // console.log($(this));
                // console.log(e);
            });

            //Initialize TOOLTIP
            $('.tooltipped').tooltip({
                exitDelay: 0,
                enterDelay: 4000,
                margin: 10
            });

            // Initialize MODAL : 
            $('.modal').modal({
                dismissable: true,
                ready: function (modal, trigger) {
                    console.log("Modal opened", modal, trigger);
                }
            });


            //DELETE EVENT FROM FAVORITES
            //Event delegation
            //TODO : 
            $('.favorites_to_delete').on('click', '.delete', function (e) {
                $(this).parent().parent().remove();
                console.log("Elements:");
                console.log($(this).parent());
                console.log($(this).parent().parent());

                //TODO remove from the array   !!!

                console.log("Deleted");
                e.preventDefault();
            });

        });
    </script>
</body>

</html>